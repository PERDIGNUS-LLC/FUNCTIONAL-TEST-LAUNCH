<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TerraDignus | The NestEgg</title>

  <!-- MODEL VIEWER -->
  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>

  <style>
    :root {
      --forest-green: #1a4d3e;
      --clay: #8d7f73;
      --off-white: #f4f4f0;
      --black: #111;
      --grey: #b3b3b3ff;
      --accent-gold: #f0c46a;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #f7f7f2 0, #e4e1da 40%, #c8c1b7 100%);
      color: var(--black);
      display: flex;
      flex-direction: column;
    }

    /* HEADER */
    header {
      text-align: center;
      padding: 1.5rem 1rem 0.5rem;
      color: var(--black);
    }

    header .logo-container {
      height: 52px;
      width: auto;
      margin-bottom: 0.5rem;
    }

    header h1 {
      font-size: 2.2rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    header .roman {
      font-size: 0.8rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: #555;
      margin-top: 0.1rem;
    }

    header p.tagline {
      margin-top: 0.6rem;
      font-size: 0.95rem;
      color: #333;
    }

    /* LAYOUT SHELL */
    main {
      flex: 1;
      display: flex;
      justify-content: center;
      padding: 1.5rem 1rem 2rem;
    }

    .shell {
      width: 100%;
      max-width: 1200px;
      background: rgba(244, 244, 240, 0.96);
      border-radius: 1.75rem;
      box-shadow:
        0 18px 40px rgba(0, 0, 0, 0.1),
        0 0 0 1px rgba(255, 255, 255, 0.7);
      padding: 1.75rem 2rem 2rem;
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2.2fr);
      gap: 1.75rem;
      align-items: stretch;
    }

    @media (max-width: 880px) {
      .shell {
        grid-template-columns: 1fr;
        padding: 1.5rem 1.25rem 1.75rem;
      }
    }

    /* LEFT: 3D VIEWER */
    .viewer-panel {
      position: relative;
      border-radius: 1.5rem;
      overflow: hidden;
      background: radial-gradient(circle at top, #f3eee8, #dcd3c7);
      display: flex;
      flex-direction: column;
    }

    model-viewer#nestegg-viewer {
      width: 100%;
      height: min(480px, 70vh);
      --poster-color: transparent;
      background: transparent;
    }

    /* Subtle hover / breathing animation container */
    .viewer-breath {
      animation: floatY 6.5s ease-in-out infinite;
    }

    @keyframes floatY {
      0%   { transform: translateY(4px); }
      50%  { transform: translateY(-4px); }
      100% { transform: translateY(4px); }
    }

    /* HOTSPOTS (glowing orbs) */
    .hotspot {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 2px solid #ffffff;
      background: radial-gradient(circle, #ffffff 0, #ffecc0 40%, rgba(255, 255, 255, 0) 70%);
      box-shadow:
        0 0 12px rgba(255, 240, 200, 0.9),
        0 0 26px rgba(255, 214, 120, 0.9),
        0 0 40px rgba(255, 180, 60, 0.7);
      outline: none;
      cursor: pointer;
      position: relative;
    }

    .hotspot::before {
      /* leader line */
      content: "";
      position: absolute;
      left: 120%;
      top: 50%;
      width: 60px;
      height: 1px;
      background: #111;
      transform: translateY(-50%);
    }

    .hotspot span.hotspot-label {
      position: absolute;
      left: 120%;
      top: 50%;
      transform: translate(70px, -50%);
      white-space: nowrap;
      font-size: 0.75rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      background: rgba(244, 244, 240, 0.9);
      padding: 0.2rem 0.4rem;
      border-radius: 10px;
      border: 1px solid rgba(17, 17, 17, 0.15);
    }

    .hotspot.muted {
      opacity: 0.15;
      box-shadow: none;
      background: radial-gradient(circle, #f5f5f5 0, #ddd 40%, rgba(255, 255, 255, 0) 70%);
    }

    .hotspot.active {
      box-shadow:
        0 0 16px rgba(255, 230, 180, 1),
        0 0 38px rgba(255, 206, 116, 0.95);
      transform: scale(1.1);
    }

    .viewer-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 1rem 0.75rem 1rem;
      border-top: 1px solid rgba(0, 0, 0, 0.05);
      background: linear-gradient(to right, rgba(255, 255, 255, 0.9), rgba(245, 243, 238, 0.95));
    }

    .viewer-controls .title {
      font-size: 0.9rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #333;
    }

    .viewer-controls button {
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.12);
      padding: 0.4rem 0.76rem;
      background: #ffffff;
      cursor: pointer;
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      transition: background 0.18s ease, box-shadow 0.18s ease, transform 0.08s ease;
    }

    .viewer-controls button:hover {
      background: #f6f4ee;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
      transform: translateY(-1px);
    }

    /* RIGHT: FEATURE LIST + DESCRIPTION */
    .details-panel {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .details-panel h2 {
      font-size: 1.4rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--forest-green);
    }

    .details-panel p.subtitle {
      font-size: 0.85rem;
      color: #444;
      max-width: 32rem;
    }

    .feature-list {
      margin-top: 0.5rem;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.55rem 1rem;
    }

    @media (max-width: 880px) {
      .feature-list {
        grid-template-columns: 1fr;
      }
    }

    .feature-chip {
      font-size: 0.78rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      padding: 0.35rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.12);
      background: rgba(255, 255, 255, 0.9);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      transition: background 0.15s ease, border-color 0.15s ease, transform 0.08s ease;
    }

    .feature-chip::before {
      content: "";
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: var(--clay);
    }

    .feature-chip.active {
      border-color: var(--forest-green);
      background: #e1f0ea;
    }

    .feature-chip.active::before {
      background: var(--forest-green);
    }

    .feature-description {
      margin-top: 0.75rem;
      padding: 0.85rem 1rem;
      border-radius: 1rem;
      background: linear-gradient(to bottom right, #ffffff, #f4f2ec);
      border: 1px solid rgba(0, 0, 0, 0.08);
      min-height: 6.5rem;
    }

    .feature-description h3 {
      font-size: 0.95rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: 0.35rem;
    }

    .feature-description p {
      font-size: 0.85rem;
      line-height: 1.5;
      color: #333;
    }

    .feature-description .tagline {
      font-size: 0.76rem;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      color: #777;
      margin-top: 0.3rem;
    }

    footer {
      text-align: center;
      font-size: 0.75rem;
      padding-bottom: 0.7rem;
      color: #444;
    }
  </style>
</head>

<body>
  <header>
    <img src="assets/TD HL BINDRUNE.png" alt="TerraDignus Logo" class="logo-container" />
    <h1>TerraDignus</h1>
    <p class="roman">EST. MMXV</p>
    <p class="tagline">The NestEgg – Variable-Volume Wildlife Habitation System</p>
  </header>

  <main>
    <section class="shell">
      <!-- LEFT: 3D VIEWER + HOTSPOTS -->
      <div class="viewer-panel">
        <div class="viewer-breath">
          <model-viewer id="nestegg-viewer"
                        src="NestEggFBCR.glb"
                        camera-controls
                        autoplay
                        auto-rotate
                        auto-rotate-delay="0"
                        rotation-per-second="10deg"
                        exposure="1.1"
                        shadow-intensity="0.4"
                        camera-orbit="0deg 70deg 2.1m"
                        camera-target="0m 0.12m 0m"
                        field-of-view="30deg"
                        ar
                        ar-modes="webxr scene-viewer quick-look"
                        disable-tap>
            <!-- HOTSPOTS – positions are placeholders for you to fine-tune in Fusion -->
            <button class="hotspot active"
                    slot="hotspot-entrance"
                    data-feature="entrance"
                    data-position="0.25m 0.12m 0.55m"
                    data-normal="0m 0m 1m"
                    data-visibility-attribute="visible">
              <span class="hotspot-label">Entrance Aperture</span>
            </button>

            <button class="hotspot"
                    slot="hotspot-vent"
                    data-feature="vent"
                    data-position="0.05m 0.25m 0.4m"
                    data-normal="0m 0m 1m"
                    data-visibility-attribute="visible">
              <span class="hotspot-label">Ventilation Aperture</span>
            </button>

            <button class="hotspot"
                    slot="hotspot-drain"
                    data-feature="drain"
                    data-position="0m -0.25m 0.45m"
                    data-normal="0m -1m 0m"
                    data-visibility-attribute="visible">
              <span class="hotspot-label">Drainage Aperture</span>
            </button>

            <button class="hotspot"
                    slot="hotspot-joint"
                    data-feature="joint"
                    data-position="0.25m 0m 0.45m"
                    data-normal="0m 0m 1m"
                    data-visibility-attribute="visible">
              <span class="hotspot-label">Shell Separation Joint</span>
            </button>

            <button class="hotspot"
                    slot="hotspot-cling"
                    data-feature="cling"
                    data-position="-0.22m -0.05m 0.4m"
                    data-normal="-1m 0m 0m"
                    data-visibility-attribute="visible">
              <span class="hotspot-label">Cling Ridge System</span>
            </button>

            <button class="hotspot"
                    slot="hotspot-insert"
                    data-feature="insert"
                    data-position="0.3m 0.1m 0.5m"
                    data-normal="0m 0m 1m"
                    data-visibility-attribute="visible">
              <span class="hotspot-label">Modular Entrance Insert</span>
            </button>

            <button class="hotspot"
                    slot="hotspot-geometry"
                    data-feature="geometry"
                    data-position="-0.05m 0.2m 0.3m"
                    data-normal="0m 0m 1m"
                    data-visibility-attribute="visible">
              <span class="hotspot-label">Ovoid Geometry</span>
            </button>

            <button class="hotspot"
                    slot="hotspot-gutter"
                    data-feature="gutter"
                    data-position="-0.18m -0.05m 0.35m"
                    data-normal="-1m 0m 0m"
                    data-visibility-attribute="visible">
              <span class="hotspot-label">Cling Ridge Gutter Channel</span>
            </button>
          </model-viewer>
        </div>

        <div class="viewer-controls">
          <div class="title">Exploded-View Engineering Overlay</div>
          <button id="reset-view-btn" type="button">
            ⟲ Full View
          </button>
        </div>
      </div>

      <!-- RIGHT: FEATURE LIST + DESCRIPTION PANEL -->
      <aside class="details-panel">
        <h2>NestEgg Feature Map</h2>
        <p class="subtitle">
          Tap a glowing orb or select a feature on the right. The NestEgg will re-orient and zoom to that area,
          while this panel expands with additional design detail.
        </p>

        <div class="feature-list">
          <button class="feature-chip active" data-feature-chip="entrance">Entrance Aperture</button>
          <button class="feature-chip" data-feature-chip="vent">Ventilation Aperture (Left)</button>
          <button class="feature-chip" data-feature-chip="drain">Drainage Aperture</button>
          <button class="feature-chip" data-feature-chip="joint">Shell Separation Joint</button>
          <button class="feature-chip" data-feature-chip="cling">Cling Ridge System</button>
          <button class="feature-chip" data-feature-chip="insert">Modular Entrance Insert</button>
          <button class="feature-chip" data-feature-chip="geometry">Overall Ovoid Geometry</button>
          <button class="feature-chip" data-feature-chip="gutter">Cling Ridge Gutter Channel</button>
        </div>

        <div class="feature-description" id="feature-description">
          <h3 id="feature-title">Entrance Aperture</h3>
          <p id="feature-body">
            Primary ingress sized to species-specific guidelines, with a short entrance tunnel that helps deter
            predators while keeping the internal cavity shaded and protected.
          </p>
          <div class="tagline" id="feature-tagline">
            Click another feature to explore how each element collaborates to regulate climate, drainage, and security.
          </div>
        </div>
      </aside>
    </section>
  </main>

  <footer>
    TerraDignus &mdash; Variable-Volume Wildlife Habitation Systems &copy; 2015&ndash;2025
  </footer>

  <script>
    const viewer = document.getElementById('nestegg-viewer');
    const hotspots = Array.from(document.querySelectorAll('.hotspot'));
    const chips = Array.from(document.querySelectorAll('.feature-chip'));

    const featureTitle = document.getElementById('feature-title');
    const featureBody = document.getElementById('feature-body');
    const featureTagline = document.getElementById('feature-tagline');

    // Camera presets & copy for each feature.
    const FEATURES = {
      entrance: {
        title: 'Entrance Aperture',
        body: 'Primary ingress to the nesting chamber. Aperture diameter can be tuned to target specific cavity-nesting species, improving occupancy while excluding larger predators.',
        tagline: 'Species-tuned entrance geometry for protection and selectivity.',
        orbit: '15deg 70deg 1.4m',
        target: '0.08m 0.12m 0.45m',
        fov: '22deg'
      },
      vent: {
        title: 'Ventilation Aperture (Left)',
        body: 'High-mounted ventilation port that exhausts warm air and allows passive cross-ventilation without exposing the cavity to direct rainfall.',
        tagline: 'Passive HVAC behavior using simple aperture placement.',
        orbit: '35deg 60deg 1.5m',
        target: '0.02m 0.23m 0.32m',
        fov: '24deg'
      },
      drain: {
        title: 'Drainage Aperture',
        body: 'Low-point drainage outlet positioned at the nadir of the ovoid shell. Any incidental moisture is directed away from the nesting surface to maintain a dry cavity.',
        tagline: 'Keep the nest floor dry even in driving rain.',
        orbit: '0deg 90deg 1.5m',
        target: '0m -0.23m 0.25m',
        fov: '24deg'
      },
      joint: {
        title: 'Shell Separation Joint',
        body: 'Circumferential separation seam between upper and lower shells. Enables tool-free access for seasonal cleaning while preserving structural continuity in normal use.',
        tagline: 'Serviceable geometry without compromising strength.',
        orbit: '20deg 75deg 1.7m',
        target: '0.12m 0.02m 0.4m',
        fov: '26deg'
      },
      cling: {
        title: 'Cling Ridge System',
        body: 'Textured radial ridges that generate frictional “cling” when the NestEgg is cinched against a support tree or post, resisting slippage without the need for fasteners.',
        tagline: 'Tree-friendly gripping without screws or nails.',
        orbit: '-40deg 80deg 1.7m',
        target: '-0.22m -0.05m 0.25m',
        fov: '24deg'
      },
      insert: {
        title: 'Modular Entrance Insert',
        body: 'Removable insert that defines the effective entrance profile. Inserts can be swapped to change species, entrance diameter, or predator-guard depth without replacing the shell.',
        tagline: 'Swap inserts instead of replacing hardware.',
        orbit: '10deg 65deg 1.4m',
        target: '0.18m 0.12m 0.45m',
        fov: '22deg'
      },
      geometry: {
        title: 'Overall Ovoid Geometry',
        body: 'Continuous ovoid shell distributes loads and sheds water efficiently. The form factor minimizes sharp corners, discouraging predator perches and cold-bridge points.',
        tagline: 'Biomimetic form for strength, drainage, and safety.',
        orbit: '0deg 70deg 2m',
        target: '0m 0.12m 0m',
        fov: '30deg'
      },
      gutter: {
        title: 'Cling Ridge Gutter Channel',
        body: 'Channel feature integrated between ridge elements to redirect rainfall away from the strapping interface and drainage outlet, reducing water intrusion at mounting points.',
        tagline: 'Micro-gutter geometry that manages runoff at the mount.',
        orbit: '-55deg 75deg 1.6m',
        target: '-0.22m -0.05m 0.2m',
        fov: '24deg'
      }
    };

    function setActiveFeature(id) {
      const f = FEATURES[id];
      if (!f) return;

      // Update camera
      if (viewer) {
        viewer.cameraOrbit = f.orbit;
        viewer.cameraTarget = f.target;
        viewer.fieldOfView = f.fov || '24deg';
      }

      // Update copy
      featureTitle.textContent = f.title;
      featureBody.textContent = f.body;
      featureTagline.textContent = f.tagline;

      // Hotspot state
      hotspots.forEach(h => {
        if (h.dataset.feature === id) {
          h.classList.add('active');
          h.classList.remove('muted');
        } else {
          h.classList.remove('active');
          h.classList.add('muted');
        }
      });

      // Chip state
      chips.forEach(c => {
        if (c.dataset.featureChip === id) {
          c.classList.add('active');
        } else {
          c.classList.remove('active');
        }
      });
    }

    hotspots.forEach(h => {
      h.addEventListener('click', () => {
        setActiveFeature(h.dataset.feature);
      });
    });

    chips.forEach(c => {
      c.addEventListener('click', () => {
        setActiveFeature(c.dataset.featureChip);
      });
    });

    // Reset button -> full overview
    document.getElementById('reset-view-btn').addEventListener('click', () => {
      if (viewer) {
        viewer.cameraOrbit = '0deg 70deg 2.1m';
        viewer.cameraTarget = '0m 0.12m 0m';
        viewer.fieldOfView = '30deg';
      }

      // Un-mute all hotspots, keep none "active" except entrance
      hotspots.forEach(h => h.classList.remove('muted'));
      setActiveFeature('entrance');
    });
  </script>
</body>
</html>
